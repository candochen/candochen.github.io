---
layout: post
title: "数学常数中的e是什么"
date: 2014-10-14 13:11:52 +0800
comments: true
categories: 
---

e是个很重要的数学常数，但是假如你在网上找e的定义，它会告诉你e是自然对数的底，然后你查什么是自然对数，它告诉你，自然对数是以e为底的对数。这就陷入了一个死循环,它就是始终不告诉你e是什么。我被这个问题困扰很久，直到最近看了这篇博客http://www.ruanyifeng.com/blog/2011/07/mathematical_constant_e.html 才稍微有些理解。但是，这篇博客并没有更深入地把e作为自然对数的底的原因讲到，所以顺着自己的好奇心，我看了几本关于数学的书，这才解了我心中的谜团。在这些书中 《e的故事，一个常数的传奇》以及《什么是数学，对思想和方法的基本研究》对这篇文章贡献最大，这篇文章的思路是这两本书给的。

## e 是什么 ##

先说利息是什么。简单来说利息就是钱生的钱。假如你存1万块钱到银行，银行给你的年利率是100%（这是假设的，别做梦了），那么一年之后你拿到的钱是2万，可以根据这个公式算得 


$$本金*(1+100\%)^1=2$$


现在你可能要想一年计息一次，我可以拿到2万，假如计息两次呢？于是你跟银行说，我要一年计息两次，银行说好吧，一年的利息是100%，那么半年的利息是50%，一年计息2次，你可以得

$$本金*(1+\frac{1}{2})^2=2.25$$

你感觉到赚了，于是继续提要求，一年计息4次，银行说好吧，一年的利息是100%，那么一季度的利息是25%，一年计息4次，你可以得到

$$本金*(1+\frac{1}{2})^4=2.44$$

这次你感觉赚了，但是增长少了，上次增长2.25-2 = 0.25，这次增长2.44 - 2.25 = 0.21。你在想假如我一年计息12次，365次，甚至每秒都计息，一年以后你会得到多少钱呢？你发现多计息一次，你就多赚一点，但是赚到的比上次少了点，你想假如无限次计息, 那么一年之后最多你能拿到多少钱呢？是否无无限多呢，还是存在某个极限？

也就是这个式子$$(1 + \frac{1}{n})^n$$, 在n趋向无穷大的时候是否存在极限。答案是会的，这个极限就是e, 它是个无理数，近似值是2.718281828。

所以一年之后，即使是无限次计息，你一年也只能拿到 

$$本金*e \approx 2.718281828$$

## e的无穷级数的形式 ##
所以我们知道 $$ e = \lim_{n\to\infty}(1 + \frac{1}{n})^n $$, 我们把式子写成 $$e= \lim_{n\to\infty}(\frac{1}{n} + 1)^n$$, 并通过二项式将其展开

$(\frac{1}{n} + 1) ^n = \binom{n}{0}\frac{1}{n}^0  1^n + \binom{n}{1}\frac{1}{n}^1  1^{n-1} + ... \binom{n}{1}\frac{1}{n}^n  1^0$

当$$n\to\infty$$，$$e = \sum_{n=0}^{\infty}\frac{1}{n!}$$, 也可以更明了地写成 

$$ e = \frac{1}{0!} + \frac{1}{1!} + \frac{1}{2!} + \frac{1}{3!} + ... $$ 

这个级数是牛顿在1769年发现的。

## e的近似解 ##

知道了e的无穷级数形式，我们可以通过程序计算出它的近似值。

{% codeblock %}

 def factorial(n: Int) : Int = {
    def factIter(n: Int, accu: Int) : Int = {
         if (n==0) accu
         else if(n==1) accu
         else factIter(n-1, accu * n)
     }
    factIter(n, 1)
  } 
 
  def numerator(n: Int) :Int ={
       (0 to n).map(factorial(n) / factorial(_)).sum
  }
 
  numerator(12).toDouble / factorial(12) 

{% endcodeblock %}

上面程序算出的结果是，2.7182818282861687

有通过改进牛顿无穷级数公式，通过6个项相加就可能得到近似值2.718281828
http://www.intmath.com/exponential-logarithmic-functions/calculating-e.php
http://www.brotherstechnology.com/docs/icnsae_%28cmj0104-300dpi%29.pdf

## ln(x)是什么 ##

数学不是按照教科书上的顺序发展的，其中积分的发明比微分早就是一个例子。这其中的原因可能是相对于一个曲线的斜率，人们更关心的是某个闭合曲线的面积吧。微积分发明以后人们知道假如面积可由函数F(x)表示，那么F(x)的导数恰好就曲线的函数。所以为了求闭合曲线下的面积，我们要找到曲线函数的原函数。对于函数$$f(x)=x^n$$，我们可以得到它的原函数为$$F(x) = \frac{1}{n + 1} x ^{n+1}$$，其中n对于任意有理数和无理数都成立。但是有个例外，就是n=-1，因为当n=-1的时候 $$\frac{1}{n+1}$$不存在。那么$x^{-1}$的原函数是什么呢？我们现在根据以下两个线索找找,

1. 在17世纪的时候有个叫圣 . 文森特的人发现了双曲线$y=x^{-1}$下投影的面积符合对数规律。


2. 根据对数的性质，对数的值为0的时候，对数的根是1。所以我们要求的这个对数函数，当x=1是值为0，并且x增大时趋向无穷大（看看下面的图就明白了），这就必然存在一个大于1的数，使得当这个对数函数x等于这个值的时候，F(x)= 1，我们暂时称这个数为a。
{% img left /images/20141016/clipboard.png 350 350 'image' 'images' %}
知道了这两个重要信息，我们想知道这个a到底是怎样一个数? 那么假设$$x^{-1}$$在1到$$\infty$$的积分的原函数是A(x), 根据导数的定义 

$$A'(x) = \frac{A(x+h) - A(x)}{h} = \frac{1}{x}$$

$$A'(x) = \frac{A(x+h) - A(x)}{h} = A(1 + \frac{h}{x}) = \frac{1}{x}$$

用$$\frac{1}{n}, n\to\infty$$来代替h，我们得到

$$A'(x) = A(1+\frac{1}{nx}) * n = \frac{1}{x}$$

根据对数性质外面的n可以移到函数里面变成

$$A'(x) = A((1+\frac{1}{nx})^n) = \frac{1}{x}$$


令x = 1 等式右边为1，等式左边括号里的东西就是$$ e = \lim_{n\to\infty}(1 + \frac{1}{n})^n $$,  原来我们要找的这个数就是e

由于A(x）是对数函数那么它的形式是$\log_a(x)$, 由于$\log_a(e) = 1$，所以a= e, 也就是以e为底的对数，也称自然对数，记为ln。 它的函数式ln(x), 它是曲线从1到x的积分， 即$\int_1^x \frac{1}{u}\,du$。

## $e^x$ 是什么 ##
$e^x$是ln(x)的反函数，它是指数函数。我们知道指数函数有这样的性质：

性质1 f(x+y) = f(x)*f(y)

性质2 f(xy) = f(x)^y

根据导数的定义，对指数函数求导

$$f'(x) = \frac{f(x+h) - f(x)}{h}, h\to 0$$

应用性质1

$$f'(x) = f(x) * \frac{f(h) - 1}{h}, h\to 0$$

所以我们可以看出指数函数的导数和它自身存在倍数关系，在什么情况先指数函数跟它自身相等呢？从上面式子可以看出，假如$\frac{f(h) - 1}{h} = 1, h\to 0$, 那么该指数函数的导数就和自身相等了。

针对$\frac{f(h) - 1}{h} = 1, h\to 0$, 令$h = \frac{1}{n}, n\to\infty$


$$\frac{f(\frac{1}{n}) - 1}{\frac{1}{n}} = 1, n\to\infty$$


$$f(\frac{1}{n}) - 1 = n, n\to\infty$$

$$f(\frac{1}{n}) = n + 1, n\to\infty$$

$$f(1)^\frac{1}{n} = n + 1, n\to\infty$$

$$f(1) = (n + 1)^n, n\to\infty$$

可以看出等式右边就是e，所以当指数函数是以e为底的指数函数式它的导数等于自身。

> 自然指数函数与它的导数相等。这是指数函数所有特征的本源，也是它得到重要应用的根本原因。--柯朗和罗宾斯《什么是数学》1941


另外，针对$\lim_{n\to\infty}(1 + \frac{1}{nx})^n$ 做二项式展开，得

$$\frac{1}{0!} + \frac{x}{1!} + \frac{x^2}{2!} + \frac{x^3}{3!} + ... $$

对以上无穷级数的每项对x求导，结果还是

$$\frac{1}{0!} + \frac{x}{1!} + \frac{x^2}{2!} + \frac{x^3}{3!} + ... $$

所以

$$e^x = \frac{1}{0!} + \frac{x}{1!} + \frac{x^2}{2!} + \frac{x^3}{3!} + ... $$
